<!-- /********************************************************************************* 
 * * ITE5315 â€“ Project 
 * * I declare that this assignment is my own work in accordance with Humber Academic Policy. 
 * * No part of this assignment has been copied manually or electronically from any other source 
 * * (including web sites) or distributed to other students. 
 * * * Group member Name: ABHAY & Prarabdha Student IDs: N01581911 & N01578947 Date: 16th April 2024 
 * *********************************************************************************/ -->
<section>
  <div class="p-5 container-fluid">
    <div class="row justify-content-center align-items-center">
      <div class="px-0 test-ptable">
        <p-table #dt [value]="movies" [resizableColumns]="false" [scrollable]="true" [paginator]="true"
          [rows]="request.rows" [first]="request.first" [lazy]="true" (onLazyLoad)="loadMovies($event)"
          [loading]="loading" [totalRecords]="totalRecords" [rowsPerPageOptions]="[5,10,50,100]" [autoLayout]="true"
          [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          responsiveLayout="stack" [breakpoint]="'960px'" [rowHover]="true" dataKey="_id">
          <ng-template pTemplate="caption">
            <div class="flex d-flex justify-content-end">
              <span class="ml-auto p-input-icon-left">
                <i class="pi pi-search"></i>
                <input pInputText type="text" (input)="filterMoviesByTitle()" [(ngModel)]="globalFilter"
                  placeholder="Search Title" class="search-p" />
              </span>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>Title</th>
              <th>Languages</th>
              <th>Year</th>
              <th>Awards</th>
              <th>Genres</th>
              <th>Directors</th>
              <th>Cast</th>
              <th>Views</th>
              <th>Imdb</th>
              <th>Comments</th>
              <th>Posters</th>

            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-movie>
            <tr>
              <td>{{ movie.title }}</td>
              <td>{{ movie.languages }}</td>
              <td>{{ movie.year }}</td>
              <td>{{ movie.awards.wins }}</td>
              <td>{{ movie.genres }}</td>
              <td>{{ movie.directors }}</td>
              <td>{{ movie.cast }}</td>
              <td>{{ movie.tomatoes.viewer.numReviews }}</td>
              <td>{{ movie.imdb.rating }}</td>
              <td>{{ movie.num_mflix_comments }}</td>
              <td><img src="{{ movie.poster }}" alt="..." width="50" height="75" class="" loading="lazy"></td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="5">No movies found.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>

</section>